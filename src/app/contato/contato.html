<body>
<main>
    <section class="contato-section">
        <div class="container">
            <!-- Cabeçalho da Página -->
            <div class="page-header">
                <h1>Entre em Contato</h1>
                <p>Sua opinião é muito importante para nós. Envie suas sugestões, dúvidas ou comentários.</p>
            </div>

            <div class="content-wrapper-centered">
                <!-- Formulário de Sugestões -->
                <div class="suggestion-form">
                    <h2>Formulário de Sugestões</h2>
                    
                    <!-- Mensagens de Status -->
                    <div *ngIf="submitSuccess" class="alert alert-success">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20,6 9,17 4,12"></polyline>
                        </svg>
                        Sua mensagem foi enviada com sucesso! Entraremos em contato em breve.
                    </div>

                    <div *ngIf="submitError" class="alert alert-error">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="15" y1="9" x2="9" y2="15"></line>
                            <line x1="9" y1="9" x2="15" y2="15"></line>
                        </svg>
                        Erro ao enviar mensagem. Tente novamente.
                    </div>

                    <form (ngSubmit)="onSubmit()" #suggestionFormRef="ngForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">Nome Completo *</label>
                                <input 
                                    type="text" 
                                    id="name" 
                                    name="name"
                                    [(ngModel)]="suggestionForm.name"
                                    required
                                    placeholder="Digite seu nome completo"
                                    class="form-control"
                                    #nameField="ngModel">
                                <div *ngIf="nameField.invalid && nameField.touched" class="error-message">
                                    Nome é obrigatório
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="email">E-mail *</label>
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email"
                                    [(ngModel)]="suggestionForm.email"
                                    required
                                    email
                                    placeholder="seu@email.com"
                                    class="form-control"
                                    #emailField="ngModel">
                                <div *ngIf="emailField.invalid && emailField.touched" class="error-message">
                                    <span *ngIf="emailField.errors?.['required']">E-mail é obrigatório</span>
                                    <span *ngIf="emailField.errors?.['email']">E-mail inválido</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="phone">Telefone</label>
                                <input 
                                    type="tel" 
                                    id="phone" 
                                    name="phone"
                                    [(ngModel)]="suggestionForm.phone"
                                    (input)="formatPhone($event)"
                                    placeholder="(11) 99999-9999"
                                    class="form-control"
                                    maxlength="15">
                            </div>

                            <div class="form-group">
                                <label for="category">Categoria</label>
                                <select 
                                    id="category" 
                                    name="category"
                                    [(ngModel)]="suggestionForm.category"
                                    class="form-control">
                                    <option *ngFor="let cat of categories" [value]="cat.value">
                                        {{cat.label}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <div class="form-group">
                                <label for="priority">Prioridade</label>
                                <select 
                                    id="priority" 
                                    name="priority"
                                    [(ngModel)]="suggestionForm.priority"
                                    class="form-control">
                                    <option *ngFor="let priority of priorities" [value]="priority.value">
                                        {{priority.label}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="message">Mensagem *</label>
                            <textarea 
                                id="message" 
                                name="message"
                                [(ngModel)]="suggestionForm.message"
                                required
                                placeholder="Descreva sua sugestão, dúvida ou comentário..."
                                class="form-control"
                                rows="6"
                                maxlength="500"
                                #messageField="ngModel"></textarea>
                            <div class="character-count">
                                <span [class]="getCharacterCountClass()">
                                    {{getCharacterCount()}}/500 caracteres
                                </span>
                            </div>
                            <div *ngIf="messageField.invalid && messageField.touched" class="error-message">
                                Mensagem é obrigatória
                            </div>
                        </div>

                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input 
                                    type="checkbox" 
                                    name="newsletter"
                                    [(ngModel)]="suggestionForm.newsletter">
                                <span class="checkmark"></span>
                                Desejo receber novidades e promoções por e-mail
                            </label>
                        </div>

                        <div class="form-group checkbox-group">
                            <label class="checkbox-label">
                                <input 
                                    type="checkbox" 
                                    name="lgpdAccepted"
                                    [(ngModel)]="suggestionForm.lgpdAccepted"
                                    required>
                                <span class="checkmark"></span>
                                Aceito os Termos e Condições conforme LGPD *
                            </label>
                        </div>

                        <div class="form-actions">
                            <button 
                                type="button" 
                                class="btn btn-secondary"
                                (click)="resetForm()"
                                [disabled]="isSubmitting">
                                Limpar Formulário
                            </button>
                            
                            <button 
                                type="submit" 
                                class="btn btn-primary"
                                [disabled]="!isFormValid() || isSubmitting">
                                <span *ngIf="isSubmitting" class="loading-spinner"></span>
                                <svg *ngIf="!isSubmitting" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                                </svg>
                                {{isSubmitting ? 'Enviando...' : 'Enviar Mensagem'}}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
</main>
</body>